#!/usr/local/bin/newt

Require("NSUnit");

/**
 * Rough testing of NSUnit.
 */

begin

	NSUnit := GetGlobalVar('|NSUnit:makkintosshu|);
	if NSUnit == NIL then Print("Couldn't get global var!\n");
	
	testCase := {
		_proto: NSUnit.protoNSUnitTestCase
	};

	// protoNSUnitTestCase:AssertTrue() tests
	Print("AssertTrue(true): ");
	try
		testCase:AssertTrue(true);
		Print("OK\n");
	onexception |evt.ex.msg.assert| do Print ("FAIL\n");
	Print("AssertTrue(nil): ");
	try
		testCase:AssertTrue(nil);
		Print("FAIL\n");
	onexception |evt.ex.msg.assert| do Print("OK\n");
	Print("AssertTrue(\"some string\"): ");
	try
		testCase:AssertTrue("some string");
		Print("FAIL\n");
	onexception |evt.ex.msg.assert| do Print("OK\n");
	
	// protoNSUnitTestCase:AssertNil() tests
	Print("AssertNil(nil): ");
	try
		testCase:AssertNil(nil);
		Print("OK\n");
	onexception |evt.ex.msg.assert| do Print ("FAIL\n");
	Print("AssertNil(true): ");
	try
		testCase:AssertNil(true);
		Print("FAIL\n");
	onexception |evt.ex.msg.assert| do Print("OK\n");
	Print("AssertNil(\"some string\"): ");
	try
		testCase:AssertNil("some string");
		Print("FAIL\n");
	onexception |evt.ex.msg.assert| do Print("OK\n");
	
	// protoNSUnitTestCase:AssertEquals() tests
	Print("AssertEquals(1,1): ");
	try
		testCase:AssertEquals(1, 1);
		Print("OK\n");
	onexception |evt.ex.msg.assert| do Print("FAIL\n");
	Print("AssertEquals(0,1): ");
	try
		testCase:AssertEquals(0, 1);
		Print("FAIL\n");
	onexception |evt.ex.msg.assert| do Print("OK\n");
	Print("AssertEquals(\"some string\",\"some string\"): ");
	try
		testCase:AssertEquals("some string", "some string");
		Print("OK\n");
	onexception |evt.ex.msg.assert| do Print("FAIL\n");
	Print("AssertEquals(\"some string\",\"some other string\"): ");
	try
		testCase:AssertEquals("some string", "some other string");
		Print("FAIL\n");
	onexception |evt.ex.msg.assert| do Print("OK\n");
	
	// protoNSUnitTestCase:Run() tests
	testCase:Run();
	Print("Assertions:" && testCase.assertions & "\n");
	Print("Passing Tests:" && testCase.passes & "\n");
	Print("Failing Tests:" && testCase.fails & "\n");
	
end;
